# æ•°æ®åº“è¡¨ä¿¡æ¯æ€»ç»“

## ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€

### è¡¨æ•°é‡ç»Ÿè®¡
- **æ€»è¡¨æ•°**: 7ä¸ªè¡¨
- **å¢å¼ºè¡¨æ•°**: 6ä¸ªè¡¨
- **ä»»åŠ¡ç¼“å­˜è¡¨**: 1ä¸ªè¡¨

## ğŸ—„ï¸ æ•°æ®åº“è¡¨è¯¦ç»†ä¿¡æ¯

### 1. å¢å¼ºç”¨æˆ·è¡¨ (enhanced_users)
**å­˜å‚¨ä¿¡æ¯**: å¢å¼ºçš„ç”¨æˆ·åŸºç¡€ä¿¡æ¯
- **è®°å½•æ•°**: 11æ¡
- **ä¸»è¦å­—æ®µ**:
  - `id`: ä¸»é”®
  - `address`: ç”¨æˆ·åœ°å€ï¼ˆå”¯ä¸€ï¼‰
  - `created_at`: åˆ›å»ºæ—¶é—´
  - `updated_at`: æ›´æ–°æ—¶é—´
  - `deleted_at`: è½¯åˆ é™¤æ—¶é—´

**ç¤ºä¾‹æ•°æ®**:
```
åœ°å€: 0x14dc79964da2c08b23698b3d3cc7ca32193d9955
åˆ›å»ºæ—¶é—´: 2025-10-20 06:40:36
```

### 2. ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡è¡¨ (user_behavior_stats)
**å­˜å‚¨ä¿¡æ¯**: ç”¨æˆ·çš„è¡Œä¸ºç»Ÿè®¡æ•°æ®ï¼Œç”¨äºGuild Scoreè®¡ç®—
- **è®°å½•æ•°**: 11æ¡
- **ä¸»è¦å­—æ®µ**:
  - **ä»»åŠ¡ç»Ÿè®¡**: `total_tasks_created`, `total_tasks_completed`, `task_completion_rate`
  - **æŠ•æ ‡ç»Ÿè®¡**: `total_bids_placed`, `total_bids_won`, `bid_win_rate`
  - **äº‰è®®ç»Ÿè®¡**: `total_disputes_as_worker`, `dispute_win_rate`
  - **è´¢åŠ¡ç»Ÿè®¡**: `total_earnings`, `total_spent`, `net_profit`
  - **è´¨é‡æŒ‡æ ‡**: `quality_score`, `reliability_score`, `collaboration_score`

**å½“å‰çŠ¶æ€**: æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰é»˜è®¤çš„è¡Œä¸ºç»Ÿè®¡æ•°æ®ï¼ˆåˆå§‹å€¼ï¼‰

### 3. æŠ•æ ‡è¡¨ (bids)
**å­˜å‚¨ä¿¡æ¯**: ç”¨æˆ·æŠ•æ ‡è®°å½•
- **è®°å½•æ•°**: 0æ¡
- **ä¸»è¦å­—æ®µ**:
  - `task_id`: ä»»åŠ¡ID
  - `bidder_addr`: æŠ•æ ‡è€…åœ°å€
  - `amount`: æŠ•æ ‡é‡‘é¢
  - `estimated_time`: é¢„è®¡å®Œæˆæ—¶é—´
  - `status`: æŠ•æ ‡çŠ¶æ€

### 4. äº‰è®®è¡¨ (disputes)
**å­˜å‚¨ä¿¡æ¯**: ä»»åŠ¡äº‰è®®è®°å½•
- **è®°å½•æ•°**: 0æ¡
- **ä¸»è¦å­—æ®µ**:
  - `dispute_id`: äº‰è®®ID
  - `task_id`: ä»»åŠ¡ID
  - `worker_addr`: å·¥ä½œè€…åœ°å€
  - `creator_addr`: åˆ›å»ºè€…åœ°å€
  - `status`: äº‰è®®çŠ¶æ€
  - `worker_approved`: å·¥ä½œè€…æ˜¯å¦åŒæ„
  - `creator_approved`: åˆ›å»ºè€…æ˜¯å¦åŒæ„

### 5. å¢å¼ºå…¬ä¼šåˆ†æ•°è¡¨ (enhanced_guild_scores)
**å­˜å‚¨ä¿¡æ¯**: ç”¨æˆ·çš„Guild Scoreåˆ†æ•°å’Œæ’å
- **è®°å½•æ•°**: 0æ¡ï¼ˆå¾…è®¡ç®—ï¼‰
- **ä¸»è¦å­—æ®µ**:
  - `total_score`: æ€»åˆ†æ•°
  - `rank`: æ’å
  - `rank_title`: ç§°å·ï¼ˆNoviceåˆ°Legendï¼‰
  - **è¯¦ç»†åˆ†æ•°**: `task_completion_score`, `bidding_score`, `dispute_score`ç­‰
  - `time_decay_factor`: æ—¶é—´è¡°å‡å› å­

### 6. å¢å¼ºå…¬ä¼šåˆ†æ•°å†å²è¡¨ (enhanced_guild_score_histories)
**å­˜å‚¨ä¿¡æ¯**: åˆ†æ•°å˜åŒ–å†å²è®°å½•
- **è®°å½•æ•°**: 0æ¡
- **ä¸»è¦å­—æ®µ**:
  - `previous_score`: ä¹‹å‰åˆ†æ•°
  - `new_score`: æ–°åˆ†æ•°
  - `score_change`: åˆ†æ•°å˜åŒ–
  - `change_reason`: å˜åŒ–åŸå› 
  - `event_type`: è§¦å‘äº‹ä»¶ç±»å‹

### 7. å¢å¼ºAIåˆ†æè¡¨ (enhanced_ai_analyses)
**å­˜å‚¨ä¿¡æ¯**: AIåˆ†æç»“æœ
- **è®°å½•æ•°**: 0æ¡
- **ä¸»è¦å­—æ®µ**:
  - `analysis_type`: åˆ†æç±»å‹
  - `result`: åˆ†æç»“æœ
  - `confidence`: ç½®ä¿¡åº¦
  - `is_anomaly`: æ˜¯å¦å¼‚å¸¸
  - `recommendations`: å»ºè®®

## ğŸ“ˆ æ•°æ®çŠ¶æ€åˆ†æ

### âœ… å·²å®Œæˆçš„è¡¨
1. **enhanced_users**: 11ä¸ªç”¨æˆ·å·²è¿ç§»
2. **user_behavior_stats**: 11ä¸ªç”¨æˆ·çš„è¡Œä¸ºç»Ÿè®¡å·²åˆ›å»ºï¼ˆé»˜è®¤å€¼ï¼‰

### â³ å¾…å¡«å……çš„è¡¨
1. **bids**: éœ€è¦ä»å­å›¾åŒæ­¥æŠ•æ ‡æ•°æ®
2. **disputes**: éœ€è¦ä»å­å›¾åŒæ­¥äº‰è®®æ•°æ®
3. **enhanced_guild_scores**: éœ€è¦è¿è¡Œåˆ†æ•°è®¡ç®—
4. **enhanced_guild_score_histories**: éœ€è¦è¿è¡Œåˆ†æ•°è®¡ç®—
5. **enhanced_ai_analyses**: éœ€è¦è¿è¡ŒAIåˆ†æ

### ğŸ”„ åŸæœ‰è¡¨ï¼ˆä¿æŒå…¼å®¹ï¼‰
1. **users**: åŸå§‹ç”¨æˆ·è¡¨ï¼ˆ11æ¡è®°å½•ï¼‰
2. **user_profiles**: ç”¨æˆ·æ¡£æ¡ˆè¡¨ï¼ˆ0æ¡è®°å½•ï¼‰
3. **guild_scores**: åŸå§‹å…¬ä¼šåˆ†æ•°è¡¨ï¼ˆ0æ¡è®°å½•ï¼‰
4. **guild_score_histories**: åŸå§‹åˆ†æ•°å†å²è¡¨ï¼ˆ0æ¡è®°å½•ï¼‰
5. **ai_analyses**: åŸå§‹AIåˆ†æè¡¨ï¼ˆ0æ¡è®°å½•ï¼‰
6. **task_caches**: ä»»åŠ¡ç¼“å­˜è¡¨ï¼ˆ2æ¡è®°å½•ï¼‰

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. è®¡ç®—ç”¨æˆ·åˆ†æ•°
```bash
make calculate-scores
```

### 2. åŒæ­¥æ›´å¤šæ•°æ®
```bash
# ä»å­å›¾åŒæ­¥æŠ•æ ‡æ•°æ®
# ä»å­å›¾åŒæ­¥äº‰è®®æ•°æ®
```

### 3. æŸ¥çœ‹ç»“æœ
```bash
make view-ranking
```

## ğŸ“Š è¡¨å…³ç³»å›¾

```
enhanced_users (11æ¡è®°å½•)
â”œâ”€â”€ user_behavior_stats (11æ¡è®°å½•)
â”œâ”€â”€ enhanced_guild_scores (0æ¡è®°å½•ï¼Œå¾…è®¡ç®—)
â”œâ”€â”€ enhanced_guild_score_histories (0æ¡è®°å½•ï¼Œå¾…è®¡ç®—)
â”œâ”€â”€ enhanced_ai_analyses (0æ¡è®°å½•ï¼Œå¾…åˆ†æ)
â”œâ”€â”€ bids (0æ¡è®°å½•ï¼Œå¾…åŒæ­¥)
â””â”€â”€ disputes (0æ¡è®°å½•ï¼Œå¾…åŒæ­¥)

åŸæœ‰è¡¨ï¼ˆä¿æŒå…¼å®¹ï¼‰
â”œâ”€â”€ users (11æ¡è®°å½•)
â”œâ”€â”€ user_profiles (0æ¡è®°å½•)
â”œâ”€â”€ guild_scores (0æ¡è®°å½•)
â”œâ”€â”€ guild_score_histories (0æ¡è®°å½•)
â”œâ”€â”€ ai_analyses (0æ¡è®°å½•)
â””â”€â”€ task_caches (2æ¡è®°å½•)
```

## ğŸ¯ æ•°æ®å®Œæ•´æ€§

- **ç”¨æˆ·æ•°æ®**: âœ… å®Œæ•´ï¼ˆ11ä¸ªç”¨æˆ·ï¼‰
- **è¡Œä¸ºç»Ÿè®¡**: âœ… å®Œæ•´ï¼ˆ11ä¸ªç”¨æˆ·çš„é»˜è®¤ç»Ÿè®¡ï¼‰
- **ä»»åŠ¡æ•°æ®**: âœ… éƒ¨åˆ†ï¼ˆ2ä¸ªä»»åŠ¡ç¼“å­˜ï¼‰
- **æŠ•æ ‡æ•°æ®**: âŒ å¾…åŒæ­¥
- **äº‰è®®æ•°æ®**: âŒ å¾…åŒæ­¥
- **åˆ†æ•°æ•°æ®**: âŒ å¾…è®¡ç®—
- **AIåˆ†æ**: âŒ å¾…åˆ†æ

è¿™ä¸ªæ•°æ®åº“è®¾è®¡ä¸ºä¼—åŒ…å¹³å°æä¾›äº†å®Œæ•´çš„æ•°æ®åŸºç¡€ï¼Œæ”¯æŒç”¨æˆ·è¡Œä¸ºåˆ†æã€å£°èª‰è¯„åˆ†å’ŒAIåˆ†æåŠŸèƒ½ã€‚
